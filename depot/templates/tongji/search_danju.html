{%extends 'main_base.html'%}
{%load i18n%}
{%load url from future%}


{%block content%}
<div class="container-fluid">
	<div class="f-main">
		<div class="main-wrap-no-right">	
			<form method="GET" action="" class="form-horizontal form-min-horizontal" >
			<div class="widget-box">
				<div class="widget-title">
					<span class="icon"><i class="icon-th-list"></i></span>
					<h5>{%trans '查询单据'%}</h5>
					<div class="widget-title-option">
						
					</div>
				</div>
				<div class="widget-content">
					<div class="row-fluid">
		            	<div class="span3">
		                    <div class="control-group">
		                        <label class="control-label" for="{{form.date_from.auto_id}}">{{form.date_from.label}}</label>
		                         <div class="controls">
		                            {{form.date_from}}
		                            <p class="help-block">{{form.date_from.help_text}}</p>
									<p class="help-block">{{form.date_from.errors}}</p>
		                         </div> 
		                    </div>
		                </div>
		                <div class="span3">
		                    <div class="control-group">
		                        <label class="control-label" for="{{form.date_to.auto_id}}">{{form.date_to.label}}</label>
		                         <div class="controls">
		                            {{form.date_to}}
		                            <p class="help-block">{{form.date_to.help_text}}</p>
									<p class="help-block">{{form.date_to.errors}}</p>
		                         </div> 
		                    </div>
		                </div>
		                <div class="span3">
		                    <div class="control-group">
		                        <label class="control-label" for="{{form.warehouse_root.auto_id}}">{{form.warehouse_root.label}}</label>
		                         <div class="controls">
		                            {{form.warehouse_root}}
		                            <p class="help-block">{{form.warehouse_root.help_text}}</p>
									<p class="help-block">{{form.warehouse_root.errors}}</p>
		                         </div> 
		                    </div>
		                </div>
		             </div>
		             <div class="row-fluid">
		            	<div class="span3">
		                    <div class="control-group">
		                        <label class="control-label" for="{{form.invoice_type.auto_id}}">{{form.invoice_type.label}}</label>
		                         <div class="controls">
		                            {{form.invoice_type}}
		                            <p class="help-block">{{form.invoice_type.help_text}}</p>
									<p class="help-block">{{form.invoice_type.errors}}</p>
		                         </div> 
		                    </div>
		                </div>
		                <div class="span3 ">
		                    <div class="control-group">
		                        <label class="control-label" for="{{form.refer.auto_id}}">{{form.refer.label}}</label>
		                         <div class="controls">
		                            {{form.refer}}
		                            <p class="help-block">{{form.refer.help_text}}</p>
									<p class="help-block">{{form.refer.errors}}</p>
		                         </div> 
		                    </div>
		                </div>
		                <div class="span3 ">
		                    <div class="control-group">
		                        <label class="control-label" for="{{form.result.auto_id}}">{{form.result.label}}</label>
		                         <div class="controls">
		                            {{form.result}}
		                            <p class="help-block">{{form.result.help_text}}</p>
									<p class="help-block">{{form.result.errors}}</p>
		                         </div> 
		                    </div>
		                </div>
		             </div>
		             <div class="row-fluid">
		            	<div class="span3 ">
		                    <div class="control-group">
		                        <label class="control-label" for="{{form.invoice_code.auto_id}}">{{form.invoice_code.label}}</label>
		                         <div class="controls">
		                            {{form.invoice_code}}
		                            <p class="help-block">{{form.invoice_code.help_text}}</p>
									<p class="help-block">{{form.invoice_code.errors}}</p>
		                         </div> 
		                    </div>
		                </div>
		                <div class="span3 ">
		                    <div class="control-group">
		                        <label class="control-label" for="{{form.voucher_code.auto_id}}">{{form.voucher_code.label}}</label>
		                         <div class="controls">
		                            {{form.voucher_code}}
		                            <p class="help-block">{{form.voucher_code.help_text}}</p>
									<p class="help-block">{{form.voucher_code.errors}}</p>
		                         </div> 
		                    </div>
		                </div>
		                <div class="span3 ">
		                    <div class="control-group">
		                        <label class="control-label" for="{{form.remark.auto_id}}">{{form.remark.label}}</label>
		                         <div class="controls">
		                            {{form.remark}}
		                            <p class="help-block">{{form.remark.help_text}}</p>
									<p class="help-block">{{form.remark.errors}}</p>
		                         </div> 
		                    </div>
		                </div>
		             </div>
		             <div class="row-fluid">
		            	<div class="span3">
		                    <div class="control-group">
		                        <label class="control-label" >{%trans '价格区间'%}</label>
		                         <div class="controls">
		                            {{form.min_price}} - {{form.max_price}}
									<p class="help-block">{{form.min_price.errors}}{{form.max_price.errors}}</p>
		                         </div> 
		                         
		                    </div>
		                </div>
		             </div>
		          
		             <div class="form-actions no-margin">
						<input type="submit"  class="btn btn-primary" value="{%trans '确定'%}"/>
						<input type="reset" class="btn btn-warning" value="{%trans '重置'%}" />
					</div>
					
				</div>
			</div>
			
			{%if post%}
			{%include page_template%}
			{%endif%}
			
			</form>
		</div>
	</div>
	
	<div class="f-left">
		<div class="left-wrap">
			{%include 'parts/tongji_left_nav.html'%}
		</div>
	</div>

	<!--div class="f-right">
		<div class="right-wrap">
			
		</div>
	</div-->
</div>
{%endblock%}

{%block endrel%}
<script language="JavaScript" src="/static/js/common/DatePicker/WdatePicker.js" type="text/javascript"></script>
<script src="/static/js/layer/layer.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
	$('#li_search_danju').addClass('current');
	$('#tab-tongji').addClass('active');
	loop=0;
	$('#{{form.invoice_type.auto_id}}').change(function(){
		$.getJSON("{%url 'tongji_get_refer' org.pk%}?refer_type="+$(this).val(),function(json){
			
			var options="";
			for(var i=0;i<json.length;i++){
				options+="<option value='"+json[i][0]+"'>"+json[i][1]+"</option>";
			}
			$('#{{form.refer.auto_id}}').empty().append(options);
			if(!loop){
				$('#{{form.refer.auto_id}}').val('{{form.refer.value|default:""}}');
				loop+=1;
			}
			
		});
	}).change();

	
});
</script>
{%endblock%}